# 클라우드 컴퓨팅

클라우드는 인프라에 사용되는 서버, 저장소, 데이터베이스, 네트워크, 소프트웨어, 데이터 분석등을 포함해  
사용자가 언제든지 it 서비스를 제공받을 수 있도록 하는 컴퓨팅 기술이다.

<br>

## 클라우드 컴퓨팅이란

클라우드 컴퓨팅의 근간은 유틸리티 컴퓨팅이다.  
it 서비스의 각 요소를 유틸리티 도구로 인식해서 가스비, 수도세를 내는 것처럼 사용한 만큼만 지불하는 방식처럼 인식하는 것이다.  

<br>

즉, 요약하자면 `클라우드 컴퓨팅 = 그리드 컴퓨팅 + 유틸리티 컴퓨팅`을 뜻한다.

- 그리드 컴퓨팅 : 가상 네트워크를 이용하여 분산된 컴퓨팅 자원을 공유하는 기술
- 유틸리티 컴퓨팅 : on-demand 컴퓨팅 방식(기업 중심 서비스)
- 클라우드 컴퓨팅 : 기술적으로는 그리드 컴퓨팅을 따르고 비용적으로는 유틸리티 컴퓨팅을 혼합한 포괄적 방법

<br>

## 클라우드 컴퓨팅 구조

클라우드 컴퓨팅 구조는 크게 2개로 나눈다.
- 리소스 계층 : 최하위 계층으로 리소스 활용과 관련된 물리 시스템 계층, 가상화 계층, 프로비저닝 계층이 있다.  
- 클라우드 서비스 계층 : 그리고 클라우드 서비스와 관련된 클라우드 서비스 관리 계층, 클라우드 서비스 계층으로 구분한다.

<br>

### 리소스 계층

클라우드 컴퓨팅의 물리적 시스템 계층은 여러 형태의 서버 계열을 활용하여 서버에 탑재된 수평적으로 스캐일 아웃 가능한 스토리지 및 네트워크 등  
물리적 요소를 의미한다.  
이를 기반으로 클라우드 이점인 agility를 제공하고 이를 통해 it 서비스 공급자는 서버 프로비저닝 또는 프로비저닝 해제를 수행하여 사용자 요구를 충족시킨다.


<br>

### 클라우드 서비스 관리 계층

물리적 시스템 계층에서 제공되는 자원에 대한 전반적인 라이프사이클 관리와 모니터링을 지원한다.  
과금관리, 보안관리, 안정적인 클라우드 서비스를 위한 성능 및 고가용성 등을 지원한다.

<br>


## 클라우드 컴퓨팅 제공 방식과 클라우드 서비스 종류

<br>

### 온프레미스
클라우드 개념이 생기기 전에 대부분 기업은 자체 데이터 서버를 구축해서 it 서비스를 수행했다.  
이를 온프레미스라고 한다.

<br>

### 퍼블릭 클라우드

퍼블릭 클라우드는 다수의 사용자에게 서버 및 스토리지 등의 클라우드 자원을 aws, azure와 같은 서비스 공급자에게 제공 받는 방법이다.  
유틸리티 컴퓨팅 방식으로 사용량에 따라 비용을 지불하는 요금산정 방식을 사용한다.

<br>

### 프라이빗 클라우드

특정 사용자나 기업만을 대상으로 하는 클라우드 서비스 방식으로 클라우드 자원과 데이터는 기업 내부에 저장되고 유지 관리에 대한  
책임을 기업이 갖는다. 인터넷이 아닌 인트라넷 방식으로 서비스에 접근하게 되므로 보안성이 높다.

<br>

### 하이브리드 클라우드

퍼블릭 + 프라이빗 클라우드를 합친 것으로 서로 다른 클라우드 간에 데이터와 어플리케이션 공유 및 이동이 유연하다.  
최근에는 가상서버와 물리 서버의 결합으로 보기도 한다.

<br>

## 클라우드 서비스 종류

- IaaS : 자동화되고 신속한 확장성을 갖고 있는 인프라를 의미하고 비용은 사용량에 따라 지불하는 방식
- PaaS : 서비스 개발자가 애플리케이션 개발, 실행을 할 수 있도록 플랫폼을 제공하는 서비스 방식, 환경 설정이 필요없다.
- SaaS : 서비스로서의 소프트웨어를 말하며 gmail 등이 있다.

<br>

# 컨테이너 기술과 도커

<br>

## 가상머신과 컨테이너

가상머신은 호스트 운영체제 위에 가상화 소프트웨어를 이용하여 여러 개의 게스트 OS를 구동하는 방식이다.  
컨테이너를 이용한 가상화는 물리적 공간 격리가 아닌 `프로세스 격리` 를 통해 경량의 이미지를 실행하고 서비스할 수 있다.

<br>

도커 엔진이 차용되는 컨테이너 기술은 리눅스 자체 기술인 `chroot`, `namespace`, `Linux container`에서 출발한다.

- change root(chroot) : 특정 디렉터리를 최상위 디렉터리인 root로 인식하게하는 리눅스 명령어
- namespace : mnt, pid, net 등의 자원을 그룹화해서 할당해 관리하는 기능
- control group(cgroup) : cpu, 메모리 등 자원 사용량 제어를 통해 특정 애플리케이션의 자원 사용을 제한하는 기능


<br>

컨테이너 기술의 장점은 다음과 같다.

- 하이퍼바이저와 게스트 os가 없어서 가볍다
- 경량이기 때문에 만들어진 이미지 복제, 이관, 배포가 쉽다.
- 게스트 os를 부팅하지 않아서 애플리케이션 시작 시간이 빠르다.
- 가상 머신보다 경량이라 더 많은 어플리케이션을 실행할 수 있다.

<br>

# 도커

컨테이너는 코드와 모든 종속성을 패키지화하는 표준 소프트웨어 단위로, 애플리케이션이 한 컴퓨팅 환경에서 다른 환경으로 빠르고 안정적으로 실행하게 한다.  
도커 컨테이너 이미지는 도커 허브로부터 내려받거나 Dockerfile을 통해 생성(build)하여 도커 엔진을 이용해 실행하면 컨테이너 서비스가 된다.

<br>

도커의 주요 기능

- LXC를 이용한 컨테이너 구동 : contained는 리눅스 및 윈도우 용 daemon으로 호스트 시스템 전체 컨테이너의 라이프사이클을 관리한다.
- 통합 Buildkit : 빌드킷은 도커 파일의 설정 정보를 이용하여 도커 이미지를 빌드하는 오픈 소스 도구를 말한다.
- 도커 cli 기반 : 도커는 command line interface로 명령을 수행한다.

<br>

도커 컨테이너 기술은 PaaS 서비스를 가능하게 하는 소프트웨어 개발환경을 제공하는 것이다.  
컨테이너 서비스에 대한 자동화된 관리, 트래픽 라우팅, 로드 밸런싱 등을 쉽게 하려면 오케스트레이션 기능이 요구된다(쿠버네티스)

<br>

도커 구성요소

- Docker Engine : 도커를 이용한 애플리케이션 실행 환경 제공을 위한 핵심 요소
- Docker Hub : 도커 컨테이너 이미지를 공유하는 클라우드 서비스
- Docker-compose : 의존성있는 컨테이너에 대한 구성 정보를 YAML 코드로 작성하여 일원화된 애플리케이션 관리를 가능하게 함
- Docker Kitematic : 컨테이너를 이용한 작업을 수행할 수 있는 grahic user interface 제공
- Docker Registry : 도커 허브 사이브처럼 공개된 레지스트리를 말함
- Docker Machine : 가상머신 프로그램 및 EC2, Azure 환경에 도커 실행 환경을 실행하기 위한 도구
- Docker Swarm : 여러 도커 호스트를 클러스터로 구축하여 관리가능한 오케스트레이션 도구


<br>

# 쿠버네티스

서비스를 증축하면서 도커 컨테이너 개수도 증가하게 된다. 이를 효율적으로 관리하기 위한 오케스트레이션 도구로 쿠버네티스가 많이 사용된다.  
보통 AWS ECS(EKS)를 많이 사용한다.

- 온프레미스 환경에서 수행하는 작업을 자동화하여 인프라 관리보다 서비스 관리에 집중할 수 있다.
- 컨테이너 장애 발생 시 자가 회복 기능을 통해 복제 컨테이너를 생성하여 서비스를 지속할 수 있다.
- 소프트웨어를 패키지화하면 점진적 업데이트를 통해 다운타임없이 쉽고 빠르게 릴리스 할 수 있다.

<br>
